{"version":3,"file":"index.js","sources":["../src/js/getRefs.js","../src/js/pixabay-api.js","../src/templates/partials/galleryItem.hbs","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["export default function getRefs() {\n  return {\n    searchForm: document.querySelector('.js-search-form'),\n    imageGallery: document.querySelector('.js-gallery'),\n    loader: document.querySelector('.js-loader'),\n  };\n}\n","const API_KEY = '43520057-d4110ce2722b475a1deefaa82';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport default class PixabayApiService {\n  #searchQuery;\n  #galleryPage;\n\n  constructor() {\n    this.#searchQuery = '';\n    this.#galleryPage = 1;\n    this.perPage = 10;\n    this.isLastPage = false;\n  }\n\n  get query() {\n    return this.#searchQuery;\n  }\n\n  set query(newQuery) {\n    this.#searchQuery = newQuery;\n  }\n\n  get page() {\n    return this.#galleryPage;\n  }\n\n  set page(newPage) {\n    this.#galleryPage = newPage;\n  }\n\n  incrementPage() {\n    this.#galleryPage += 1;\n  }\n\n  resetPage() {\n    this.#galleryPage = 1;\n  }\n\n  fetchImages() {\n    const searchParams = new URLSearchParams({\n      key: API_KEY,\n      q: this.#searchQuery,\n      page: this.#galleryPage,\n      per_page: this.perPage,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n    });\n    const url = `${BASE_URL}?${searchParams}`;\n\n    return fetch(url)\n      .then(resp => {\n        if (!resp.ok) {\n          throw new Error(`HTTP error: ${resp.status}`);\n        }\n\n        return resp.json();\n      })\n      .then(data => {\n        this.incrementPage();\n        const result = this.#galleryPage * this.perPage;\n        if (result > data.totalHits) {\n          this.isLastPage = true;\n          console.log('This is last page!');\n          console.log('isLastPage:', this.isLastPage);\n        }\n\n        return data;\n      });\n  }\n}\n","{{#each this}}\n  <li class='gallery-item'>\n    <article>\n      <a class='gallery-item-link' href='{{largeImageURL}}'>\n        <img\n          class='gallery-item-image'\n          src='{{webformatURL}}'\n          alt='{{tags}}'\n          width='150'\n        />\n      </a>\n\n      <ul class='gallery-item-meta'>\n        <li class='gallery-item-likes'>\n          <h3>likes</h3>\n          <p>{{likes}}</p>\n        </li>\n        <li class='gallery-item-views'>\n          <h3>views</h3>\n          <p>{{views}}</p>\n        </li>\n        <li class='gallery-item-comments'>\n          <h3>comments</h3>\n          <p>{{comments}}</p>\n        </li>\n        <li class='gallery-item-downloads'>\n          <h3>downloads</h3>\n          <p>{{downloads}}</p>\n        </li>\n      </ul>\n    </article>\n  </li>\n{{/each}}\n","import galleryItemTpl from '../templates/partials/galleryItem.hbs';\nimport getRefs from './getRefs';\n\nconst refs = getRefs();\n\nexport function appendGalleryItemsMarkup(items) {\n  refs.imageGallery.insertAdjacentHTML('beforeend', galleryItemTpl(items));\n}\n\nexport function clearGalleryContainer() {\n  refs.imageGallery.innerHTML = '';\n}\n","import './css/style.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport getRefs from './js/getRefs';\nimport PixabayApiService from './js/pixabay-api';\nimport {\n  appendGalleryItemsMarkup,\n  clearGalleryContainer,\n} from './js/render-functions';\n\nconst refs = getRefs();\nconst pixabayApiService = new PixabayApiService();\n// const options = {\n//   root: null,\n//   rootMargin: '300px',\n// };\n// const observer = new IntersectionObserver(onLoadMore, options);\nlet simplelightbox;\n\nrefs.searchForm.addEventListener('submit', onSearch);\n\nfunction onSearch(evt) {\n  evt.preventDefault();\n\n  const form = evt.currentTarget;\n  const query = form.elements.query.value.trim();\n\n  if (!query) {\n    alert('Введіть пошуковий запит');\n    return;\n  }\n\n  pixabayApiService.query = query;\n  pixabayApiService.resetPage();\n  pixabayApiService.fetchImages().then(({ hits }) => {\n    clearGalleryContainer();\n    appendGalleryItemsMarkup(hits);\n    simplelightbox = new SimpleLightbox('.js-gallery a');\n  });\n\n  form.reset();\n}\n\nfunction onLoadMore() {\n  console.log('test');\n  pixabayApiService.fetchImages().then(({ hits, totalHits }) => {\n    appendGalleryItemsMarkup(hits);\n    simplelightbox.refresh();\n  });\n}\n"],"names":["getRefs","API_KEY","BASE_URL","PixabayApiService","__privateAdd","_searchQuery","_galleryPage","__privateSet","__privateGet","newQuery","newPage","searchParams","url","resp","data","galleryItemTpl","Handlebars","container","depth0","helpers","partials","helper","alias1","alias2","alias3","alias4","lookupProperty","parent","propertyName","stack1","refs","appendGalleryItemsMarkup","items","clearGalleryContainer","pixabayApiService","onSearch","evt","form","query","hits","SimpleLightbox"],"mappings":"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"}